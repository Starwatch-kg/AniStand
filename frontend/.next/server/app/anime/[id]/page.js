(()=>{var e={};e.id=229,e.ids=[229],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},2181:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},3030:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>p,tree:()=>d});var a=s(7096),r=s(6132),i=s(7284),n=s.n(i),l=s(2564),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);s.d(t,c);let d=["",{children:["anime",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,4657)),"/home/neoalderson/Project/AniStand/frontend/src/app/anime/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,454)),"/home/neoalderson/Project/AniStand/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9291,23)),"next/dist/client/components/not-found-error"]}],o=["/home/neoalderson/Project/AniStand/frontend/src/app/anime/[id]/page.tsx"],x="/anime/[id]/page",m={require:s,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/anime/[id]/page",pathname:"/anime/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},4304:(e,t,s)=>{Promise.resolve().then(s.bind(s,4979))},1018:(e,t,s)=>{"use strict";e.exports=s(7804)},4979:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var a=s(3854),r=s(4218),i=s(1018),n=s(1956),l=s.n(n),c=s(9398),d=s(2887),o=s(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let x=(0,o.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);var m=s(6699),p=s(7510);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let u=(0,o.Z)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);var g=s(2828);function h(){let e=(0,i.useParams)(),t=parseInt(e.id),[s,n]=(0,r.useState)(null),[o,h]=(0,r.useState)([]),[y,j]=(0,r.useState)(!0),[v,b]=(0,r.useState)(""),[N,f]=(0,r.useState)(null);(0,r.useEffect)(()=>{t&&w()},[t]);let w=async()=>{j(!0);try{let e=await g.JF.getDetail(t);n(e);let s=await g.DN.getByAnime(t);h(s.data),s.data.length>0&&f(s.data[0]),b("")}catch(e){console.error("Error loading anime data:",e),b("Не удалось загрузить информацию об аниме")}finally{j(!1)}};return y?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-anime-purple mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Загрузка..."})]})}):v||!s?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Ошибка"}),a.jsx("p",{className:"text-gray-600",children:v||"Аниме не найдено"})]})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[s.banner_image&&a.jsx("div",{className:"h-64 md:h-96 bg-cover bg-center relative",style:{backgroundImage:`url(${s.banner_image})`},children:a.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50"})}),a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsx("div",{className:"lg:col-span-1",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden",children:[a.jsx("div",{className:"aspect-[3/4] relative",children:s.cover_image?a.jsx(l(),{src:s.cover_image,alt:s.title_romaji,fill:!0,className:"object-cover",sizes:"(max-width: 1024px) 100vw, 33vw"}):a.jsx("div",{className:"w-full h-full bg-gradient-to-br from-anime-purple to-anime-pink flex items-center justify-center",children:a.jsx("span",{className:"text-white text-6xl font-bold",children:s.title_romaji.charAt(0)})})}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[s.status&&a.jsx("div",{children:a.jsx("span",{className:`px-3 py-1 text-sm font-medium rounded-full ${(e=>{switch(e){case"FINISHED":return"bg-green-100 text-green-800";case"RELEASING":return"bg-blue-100 text-blue-800";case"NOT_YET_RELEASED":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}})(s.status)}`,children:(e=>{switch(e){case"FINISHED":return"Завершено";case"RELEASING":return"Выходит";case"NOT_YET_RELEASED":return"Анонс";default:return"Неизвестно"}})(s.status)})}),s.average_score&&(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(c.Z,{className:"h-5 w-5 text-yellow-400 fill-current"}),a.jsx("span",{className:"text-lg font-semibold",children:(s.average_score/10).toFixed(1)}),a.jsx("span",{className:"text-gray-500",children:"/ 10"})]}),s.episodes&&(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(d.Z,{className:"h-5 w-5 text-gray-500"}),(0,a.jsxs)("span",{children:[s.episodes," эпизодов"]})]}),s.duration&&(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(x,{className:"h-5 w-5 text-gray-500"}),(0,a.jsxs)("span",{children:[s.duration," мин/эп"]})]}),s.season_year&&(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(m.Z,{className:"h-5 w-5 text-gray-500"}),a.jsx("span",{children:s.season_year}),s.season&&(0,a.jsxs)("span",{children:["• ",s.season]})]}),s.studios&&s.studios.length>0&&(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Студия"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:s.studios.map(e=>a.jsx("span",{className:"px-2 py-1 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded",children:e.name},e.id))})]}),s.genres&&s.genres.length>0&&(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Жанры"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:s.genres.map(e=>a.jsx("span",{className:"px-2 py-1 text-sm bg-anime-purple bg-opacity-10 text-anime-purple rounded",children:e.name},e.id))})]})]}),(0,a.jsxs)("div",{className:"mt-6 space-y-3",children:[(0,a.jsxs)("button",{className:"w-full anime-button flex items-center justify-center space-x-2",children:[a.jsx(p.Z,{className:"h-5 w-5"}),a.jsx("span",{children:"Добавить в избранное"})]}),(0,a.jsxs)("button",{className:"w-full border border-anime-purple text-anime-purple px-4 py-2 rounded-lg hover:bg-anime-purple hover:text-white transition-colors flex items-center justify-center space-x-2",children:[a.jsx(u,{className:"h-5 w-5"}),a.jsx("span",{children:"Поделиться"})]})]})]})]})}),(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-8",children:[(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:s.title_english||s.title_romaji}),s.title_romaji!==s.title_english&&a.jsx("h2",{className:"text-xl text-gray-600 dark:text-gray-400 mb-4",children:s.title_romaji}),s.title_native&&a.jsx("h3",{className:"text-lg text-gray-500 dark:text-gray-500 mb-6",children:s.title_native}),s.description&&(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"Описание"}),a.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:s.description})]})]}),o.length>0&&(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[(0,a.jsxs)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6",children:["Эпизоды (",o.length,")"]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map(e=>a.jsx("div",{className:`p-4 border rounded-lg cursor-pointer transition-colors ${N?.id===e.id?"border-anime-purple bg-anime-purple bg-opacity-10":"border-gray-200 dark:border-gray-600 hover:border-anime-purple"}`,onClick:()=>f(e),children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-anime-purple text-white rounded-lg flex items-center justify-center font-semibold",children:e.episode_number}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white truncate",children:e.title||`Эпизод ${e.episode_number}`}),e.duration&&(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[Math.floor(e.duration/60)," мин"]})]})]})},e.id))}),N&&(0,a.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:N.title||`Эпизод ${N.episode_number}`}),N.description&&a.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:N.description}),(0,a.jsxs)("button",{className:"anime-button",children:[a.jsx(d.Z,{className:"h-5 w-5 mr-2"}),"Смотреть эпизод"]})]})]})]})]})})]})}},2828:(e,t,s)=>{"use strict";s.d(t,{DN:()=>l,JF:()=>n,c4:()=>d,iJ:()=>c});var a=s(6874);let r=process.env.NEXT_PUBLIC_API_URL||"http://localhost:8000",i=a.Z.create({baseURL:r,timeout:1e4,headers:{"Content-Type":"application/json"}});i.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e}),i.interceptors.response.use(e=>e,e=>(e.response?.status===401&&(localStorage.removeItem("token"),window.location.href="/auth/login"),Promise.reject(e)));let n={getList:async e=>{let t=await i.get("/api/v1/anime/",{params:e});return t.data},getDetail:async e=>{let t=await i.get(`/api/v1/anime/${e}`);return t.data},search:async(e,t=10)=>{let s=await i.get("/api/v1/anime/search",{params:{q:e,limit:t}});return s.data},getGenres:async()=>{let e=await i.get("/api/v1/anime/genres/");return e.data},getStudios:async()=>{let e=await i.get("/api/v1/anime/studios/");return e.data}},l={getByAnime:async e=>{let t=await i.get(`/api/v1/episodes/anime/${e}`);return t.data},getDetail:async e=>{let t=await i.get(`/api/v1/episodes/${e}`);return t.data},getSources:async e=>{let t=await i.get(`/api/v1/episodes/${e}/sources`);return t.data},saveProgress:async(e,t,s=!1)=>{await i.post(`/api/v1/episodes/${e}/progress`,{progress:t,completed:s})}},c={register:async e=>{let t=await i.post("/api/v1/auth/register",e);return t.data},login:async e=>{let t=new FormData;t.append("username",e.username),t.append("password",e.password);let s=await i.post("/api/v1/auth/login",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}});return s.data},refresh:async()=>{let e=await i.post("/api/v1/auth/refresh");return e.data}},d=async()=>{let e=await i.get("/health");return e.data}},4657:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>i,default:()=>c});var a=s(5153);let r=(0,a.createProxy)(String.raw`/home/neoalderson/Project/AniStand/frontend/src/app/anime/[id]/page.tsx`),{__esModule:i,$$typeof:n}=r,l=r.default,c=l}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[208,874,534,98],()=>s(3030));module.exports=a})();