(()=>{var e={};e.id=229,e.ids=[229],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7790:e=>{"use strict";e.exports=require("assert")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},8791:e=>{"use strict";e.exports=require("https")},9801:e=>{"use strict";e.exports=require("os")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},4175:e=>{"use strict";e.exports=require("tty")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},7394:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>p,tree:()=>d}),t(5695),t(5831),t(5866);var a=t(3191),r=t(8716),i=t(7922),n=t.n(i),l=t(5231),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);t.d(s,c);let d=["",{children:["anime",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,5695)),"/home/neoalderson/Project/AniStand/frontend/src/app/anime/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,5831)),"/home/neoalderson/Project/AniStand/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],o=["/home/neoalderson/Project/AniStand/frontend/src/app/anime/[id]/page.tsx"],x="/anime/[id]/page",m={require:t,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/anime/[id]/page",pathname:"/anime/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},3429:(e,s,t)=>{Promise.resolve().then(t.bind(t,261))},5047:(e,s,t)=>{"use strict";var a=t(7389);t.o(a,"useParams")&&t.d(s,{useParams:function(){return a.useParams}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})},261:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>u});var a=t(326),r=t(7577),i=t(5047),n=t(6226),l=t(3734),c=t(4893),d=t(6557);let o=(0,d.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);var x=t(7358),m=t(7427);let p=(0,d.Z)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);function u(){parseInt((0,i.useParams)().id);let[e,s]=(0,r.useState)(null),[t,d]=(0,r.useState)([]),[u,g]=(0,r.useState)(!0),[h,y]=(0,r.useState)(""),[j,b]=(0,r.useState)(null);return u?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-anime-purple mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Загрузка..."})]})}):h||!e?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Ошибка"}),a.jsx("p",{className:"text-gray-600",children:h||"Аниме не найдено"})]})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.banner_image&&a.jsx("div",{className:"h-64 md:h-96 bg-cover bg-center relative",style:{backgroundImage:`url(${e.banner_image})`},children:a.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50"})}),a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsx("div",{className:"lg:col-span-1",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden",children:[a.jsx("div",{className:"aspect-[3/4] relative",children:e.cover_image?a.jsx(n.default,{src:e.cover_image,alt:e.title_romaji,fill:!0,className:"object-cover",sizes:"(max-width: 1024px) 100vw, 33vw"}):a.jsx("div",{className:"w-full h-full bg-gradient-to-br from-anime-purple to-anime-pink flex items-center justify-center",children:a.jsx("span",{className:"text-white text-6xl font-bold",children:e.title_romaji.charAt(0)})})}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[e.status&&a.jsx("div",{children:a.jsx("span",{className:`px-3 py-1 text-sm font-medium rounded-full ${(e=>{switch(e){case"FINISHED":return"bg-green-100 text-green-800";case"RELEASING":return"bg-blue-100 text-blue-800";case"NOT_YET_RELEASED":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}})(e.status)}`,children:(e=>{switch(e){case"FINISHED":return"Завершено";case"RELEASING":return"Выходит";case"NOT_YET_RELEASED":return"Анонс";default:return"Неизвестно"}})(e.status)})}),e.average_score&&(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(l.Z,{className:"h-5 w-5 text-yellow-400 fill-current"}),a.jsx("span",{className:"text-lg font-semibold",children:(e.average_score/10).toFixed(1)}),a.jsx("span",{className:"text-gray-500",children:"/ 10"})]}),e.episodes&&(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(c.Z,{className:"h-5 w-5 text-gray-500"}),(0,a.jsxs)("span",{children:[e.episodes," эпизодов"]})]}),e.duration&&(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(o,{className:"h-5 w-5 text-gray-500"}),(0,a.jsxs)("span",{children:[e.duration," мин/эп"]})]}),e.season_year&&(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(x.Z,{className:"h-5 w-5 text-gray-500"}),a.jsx("span",{children:e.season_year}),e.season&&(0,a.jsxs)("span",{children:["• ",e.season]})]}),e.studios&&e.studios.length>0&&(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Студия"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:e.studios.map(e=>a.jsx("span",{className:"px-2 py-1 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded",children:e.name},e.id))})]}),e.genres&&e.genres.length>0&&(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Жанры"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:e.genres.map(e=>a.jsx("span",{className:"px-2 py-1 text-sm bg-anime-purple bg-opacity-10 text-anime-purple rounded",children:e.name},e.id))})]})]}),(0,a.jsxs)("div",{className:"mt-6 space-y-3",children:[(0,a.jsxs)("button",{className:"w-full anime-button flex items-center justify-center space-x-2",children:[a.jsx(m.Z,{className:"h-5 w-5"}),a.jsx("span",{children:"Добавить в избранное"})]}),(0,a.jsxs)("button",{className:"w-full border border-anime-purple text-anime-purple px-4 py-2 rounded-lg hover:bg-anime-purple hover:text-white transition-colors flex items-center justify-center space-x-2",children:[a.jsx(p,{className:"h-5 w-5"}),a.jsx("span",{children:"Поделиться"})]})]})]})]})}),(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-8",children:[(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:e.title_english||e.title_romaji}),e.title_romaji!==e.title_english&&a.jsx("h2",{className:"text-xl text-gray-600 dark:text-gray-400 mb-4",children:e.title_romaji}),e.title_native&&a.jsx("h3",{className:"text-lg text-gray-500 dark:text-gray-500 mb-6",children:e.title_native}),e.description&&(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"Описание"}),a.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:e.description})]})]}),t.length>0&&(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[(0,a.jsxs)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6",children:["Эпизоды (",t.length,")"]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(e=>a.jsx("div",{className:`p-4 border rounded-lg cursor-pointer transition-colors ${j?.id===e.id?"border-anime-purple bg-anime-purple bg-opacity-10":"border-gray-200 dark:border-gray-600 hover:border-anime-purple"}`,onClick:()=>b(e),children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-anime-purple text-white rounded-lg flex items-center justify-center font-semibold",children:e.episode_number}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white truncate",children:e.title||`Эпизод ${e.episode_number}`}),e.duration&&(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[Math.floor(e.duration/60)," мин"]})]})]})},e.id))}),j&&(0,a.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:j.title||`Эпизод ${j.episode_number}`}),j.description&&a.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:j.description}),(0,a.jsxs)("button",{className:"anime-button",children:[a.jsx(c.Z,{className:"h-5 w-5 mr-2"}),"Смотреть эпизод"]})]})]})]})]})})]})}t(8069)},8069:(e,s,t)=>{"use strict";t.d(s,{DN:()=>l,JF:()=>n,iJ:()=>c});var a=t(4464);let r=process.env.NEXT_PUBLIC_API_URL||"http://localhost:8000",i=a.Z.create({baseURL:r,timeout:1e4,headers:{"Content-Type":"application/json"}});i.interceptors.request.use(e=>{let s=localStorage.getItem("token");return s&&(e.headers.Authorization=`Bearer ${s}`),e}),i.interceptors.response.use(e=>e,e=>(e.response?.status===401&&(localStorage.removeItem("token"),window.location.href="/auth/login"),Promise.reject(e)));let n={getList:async e=>(await i.get("/api/v1/anime/",{params:e})).data,getDetail:async e=>(await i.get(`/api/v1/anime/${e}`)).data,search:async(e,s=10)=>(await i.get("/api/v1/anime/search",{params:{q:e,limit:s}})).data,getGenres:async()=>(await i.get("/api/v1/anime/genres/")).data,getStudios:async()=>(await i.get("/api/v1/anime/studios/")).data},l={getByAnime:async e=>(await i.get(`/api/v1/episodes/anime/${e}`)).data,getDetail:async e=>(await i.get(`/api/v1/episodes/${e}`)).data,getSources:async e=>(await i.get(`/api/v1/episodes/${e}/sources`)).data,saveProgress:async(e,s,t=!1)=>{await i.post(`/api/v1/episodes/${e}/progress`,{progress:s,completed:t})}},c={register:async e=>(await i.post("/api/v1/auth/register",e)).data,login:async e=>{let s=new FormData;return s.append("username",e.username),s.append("password",e.password),(await i.post("/api/v1/auth/login",s,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})).data},refresh:async()=>(await i.post("/api/v1/auth/refresh")).data}},5695:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(8570).createProxy)(String.raw`/home/neoalderson/Project/AniStand/frontend/src/app/anime/[id]/page.tsx#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[953,464,230,528],()=>t(7394));module.exports=a})();