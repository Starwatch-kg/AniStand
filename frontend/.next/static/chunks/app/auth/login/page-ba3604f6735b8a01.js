(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[716],{9445:function(e,t,a){Promise.resolve().then(a.bind(a,3112))},3112:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return p}});var r=a(7437),s=a(2265),n=a(1396),i=a.n(n),l=a(4033),d=a(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,d.Z)("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),c=(0,d.Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),u=(0,d.Z)("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);var m=a(6454);function p(){let e=(0,l.useRouter)(),[t,a]=(0,s.useState)({username:"",password:""}),[n,d]=(0,s.useState)(!1),[p,x]=(0,s.useState)(!1),[h,g]=(0,s.useState)(""),y=async a=>{a.preventDefault(),x(!0),g("");try{let a=await m.iJ.login(t);localStorage.setItem("token",a.access_token),e.push("/")}catch(e){var r,s;console.error("Login error:",e),g((null===(s=e.response)||void 0===s?void 0:null===(r=s.data)||void 0===r?void 0:r.detail)||"Ошибка входа. Проверьте логин и пароль.")}finally{x(!1)}},f=e=>{a(t=>({...t,[e.target.name]:e.target.value}))};return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 py-12 px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)("div",{className:"w-16 h-16 bg-gradient-to-r from-anime-purple to-anime-pink rounded-lg flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-white font-bold text-2xl",children:"A"})})}),(0,r.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900 dark:text-white",children:"Вход в аккаунт"}),(0,r.jsxs)("p",{className:"mt-2 text-center text-sm text-gray-600 dark:text-gray-400",children:["Или"," ",(0,r.jsx)(i(),{href:"/auth/register",className:"font-medium text-anime-purple hover:text-anime-pink",children:"создайте новый аккаунт"})]})]}),(0,r.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:y,children:[h&&(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:h}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Имя пользователя"}),(0,r.jsx)("input",{id:"username",name:"username",type:"text",required:!0,value:t.username,onChange:f,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm placeholder-gray-400 focus:outline-none focus:ring-anime-purple focus:border-anime-purple dark:bg-gray-800 dark:text-white",placeholder:"Введите имя пользователя"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Пароль"}),(0,r.jsxs)("div",{className:"mt-1 relative",children:[(0,r.jsx)("input",{id:"password",name:"password",type:n?"text":"password",required:!0,value:t.password,onChange:f,className:"block w-full px-3 py-2 pr-10 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm placeholder-gray-400 focus:outline-none focus:ring-anime-purple focus:border-anime-purple dark:bg-gray-800 dark:text-white",placeholder:"Введите пароль"}),(0,r.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>d(!n),children:n?(0,r.jsx)(o,{className:"h-5 w-5 text-gray-400"}):(0,r.jsx)(c,{className:"h-5 w-5 text-gray-400"})})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-anime-purple focus:ring-anime-purple border-gray-300 rounded"}),(0,r.jsx)("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-900 dark:text-gray-300",children:"Запомнить меня"})]}),(0,r.jsx)("div",{className:"text-sm",children:(0,r.jsx)(i(),{href:"/auth/forgot-password",className:"font-medium text-anime-purple hover:text-anime-pink",children:"Забыли пароль?"})})]}),(0,r.jsx)("div",{children:(0,r.jsx)("button",{type:"submit",disabled:p,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-gradient-to-r from-anime-purple to-anime-pink hover:opacity-90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-anime-purple disabled:opacity-50 disabled:cursor-not-allowed",children:p?(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Вход..."]}):(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(u,{className:"h-5 w-5 mr-2"}),"Войти"]})})}),(0,r.jsxs)("div",{className:"mt-6",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,r.jsx)("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"})}),(0,r.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,r.jsx)("span",{className:"px-2 bg-gray-50 dark:bg-gray-900 text-gray-500",children:"Или"})})]}),(0,r.jsxs)("div",{className:"mt-6 text-center",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Для тестирования используйте:"}),(0,r.jsxs)("div",{className:"mt-2 p-3 bg-gray-100 dark:bg-gray-800 rounded-lg text-sm",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Логин:"})," testuser"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Пароль:"})," test123"]})]})]})]})]})]})})}},6454:function(e,t,a){"use strict";a.d(t,{DN:function(){return d},JF:function(){return l},c4:function(){return c},iJ:function(){return o}});var r=a(4829),s=a(2601);let n=s.env.NEXT_PUBLIC_API_URL||"http://localhost:8000",i=r.Z.create({baseURL:n,timeout:1e4,headers:{"Content-Type":"application/json"}});i.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),i.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(localStorage.removeItem("token"),window.location.href="/auth/login"),Promise.reject(e)});let l={getList:async e=>{let t=await i.get("/api/v1/anime/",{params:e});return t.data},getDetail:async e=>{let t=await i.get("/api/v1/anime/".concat(e));return t.data},search:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=await i.get("/api/v1/anime/search",{params:{q:e,limit:t}});return a.data},getGenres:async()=>{let e=await i.get("/api/v1/anime/genres/");return e.data},getStudios:async()=>{let e=await i.get("/api/v1/anime/studios/");return e.data}},d={getByAnime:async e=>{let t=await i.get("/api/v1/episodes/anime/".concat(e));return t.data},getDetail:async e=>{let t=await i.get("/api/v1/episodes/".concat(e));return t.data},getSources:async e=>{let t=await i.get("/api/v1/episodes/".concat(e,"/sources"));return t.data},saveProgress:async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];await i.post("/api/v1/episodes/".concat(e,"/progress"),{progress:t,completed:a})}},o={register:async e=>{let t=await i.post("/api/v1/auth/register",e);return t.data},login:async e=>{let t=new FormData;t.append("username",e.username),t.append("password",e.password);let a=await i.post("/api/v1/auth/login",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}});return a.data},refresh:async()=>{let e=await i.post("/api/v1/auth/refresh");return e.data}},c=async()=>{let e=await i.get("/health");return e.data}},4033:function(e,t,a){e.exports=a(94)}},function(e){e.O(0,[77,396,971,472,744],function(){return e(e.s=9445)}),_N_E=e.O()}]);