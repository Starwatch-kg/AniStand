(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[229],{7810:function(e,a,t){"use strict";t.d(a,{Z:function(){return r}});var s=t(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s.Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},1962:function(e,a,t){Promise.resolve().then(t.bind(t,8984))},8984:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return p}});var s=t(7437),r=t(2265),n=t(4033),i=t(6691),l=t.n(i),c=t(5340),d=t(4900),o=t(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let x=(0,o.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);var m=t(8203),g=t(7810);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let u=(0,o.Z)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);var h=t(6454);function p(){let e=(0,n.useParams)(),a=parseInt(e.id),[t,i]=(0,r.useState)(null),[o,p]=(0,r.useState)([]),[y,j]=(0,r.useState)(!0),[v,b]=(0,r.useState)(""),[N,f]=(0,r.useState)(null);(0,r.useEffect)(()=>{a&&w()},[a]);let w=async()=>{j(!0);try{let e=await h.JF.getDetail(a);i(e);let t=await h.DN.getByAnime(a);p(t.data),t.data.length>0&&f(t.data[0]),b("")}catch(e){console.error("Error loading anime data:",e),b("Не удалось загрузить информацию об аниме")}finally{j(!1)}};return y?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-anime-purple mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Загрузка..."})]})}):v||!t?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Ошибка"}),(0,s.jsx)("p",{className:"text-gray-600",children:v||"Аниме не найдено"})]})}):(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[t.banner_image&&(0,s.jsx)("div",{className:"h-64 md:h-96 bg-cover bg-center relative",style:{backgroundImage:"url(".concat(t.banner_image,")")},children:(0,s.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50"})}),(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,s.jsx)("div",{className:"lg:col-span-1",children:(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden",children:[(0,s.jsx)("div",{className:"aspect-[3/4] relative",children:t.cover_image?(0,s.jsx)(l(),{src:t.cover_image,alt:t.title_romaji,fill:!0,className:"object-cover",sizes:"(max-width: 1024px) 100vw, 33vw"}):(0,s.jsx)("div",{className:"w-full h-full bg-gradient-to-br from-anime-purple to-anime-pink flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-white text-6xl font-bold",children:t.title_romaji.charAt(0)})})}),(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[t.status&&(0,s.jsx)("div",{children:(0,s.jsx)("span",{className:"px-3 py-1 text-sm font-medium rounded-full ".concat((e=>{switch(e){case"FINISHED":return"bg-green-100 text-green-800";case"RELEASING":return"bg-blue-100 text-blue-800";case"NOT_YET_RELEASED":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}})(t.status)),children:(e=>{switch(e){case"FINISHED":return"Завершено";case"RELEASING":return"Выходит";case"NOT_YET_RELEASED":return"Анонс";default:return"Неизвестно"}})(t.status)})}),t.average_score&&(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(c.Z,{className:"h-5 w-5 text-yellow-400 fill-current"}),(0,s.jsx)("span",{className:"text-lg font-semibold",children:(t.average_score/10).toFixed(1)}),(0,s.jsx)("span",{className:"text-gray-500",children:"/ 10"})]}),t.episodes&&(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(d.Z,{className:"h-5 w-5 text-gray-500"}),(0,s.jsxs)("span",{children:[t.episodes," эпизодов"]})]}),t.duration&&(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(x,{className:"h-5 w-5 text-gray-500"}),(0,s.jsxs)("span",{children:[t.duration," мин/эп"]})]}),t.season_year&&(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(m.Z,{className:"h-5 w-5 text-gray-500"}),(0,s.jsx)("span",{children:t.season_year}),t.season&&(0,s.jsxs)("span",{children:["• ",t.season]})]}),t.studios&&t.studios.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Студия"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:t.studios.map(e=>(0,s.jsx)("span",{className:"px-2 py-1 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded",children:e.name},e.id))})]}),t.genres&&t.genres.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Жанры"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:t.genres.map(e=>(0,s.jsx)("span",{className:"px-2 py-1 text-sm bg-anime-purple bg-opacity-10 text-anime-purple rounded",children:e.name},e.id))})]})]}),(0,s.jsxs)("div",{className:"mt-6 space-y-3",children:[(0,s.jsxs)("button",{className:"w-full anime-button flex items-center justify-center space-x-2",children:[(0,s.jsx)(g.Z,{className:"h-5 w-5"}),(0,s.jsx)("span",{children:"Добавить в избранное"})]}),(0,s.jsxs)("button",{className:"w-full border border-anime-purple text-anime-purple px-4 py-2 rounded-lg hover:bg-anime-purple hover:text-white transition-colors flex items-center justify-center space-x-2",children:[(0,s.jsx)(u,{className:"h-5 w-5"}),(0,s.jsx)("span",{children:"Поделиться"})]})]})]})]})}),(0,s.jsxs)("div",{className:"lg:col-span-2 space-y-8",children:[(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:t.title_english||t.title_romaji}),t.title_romaji!==t.title_english&&(0,s.jsx)("h2",{className:"text-xl text-gray-600 dark:text-gray-400 mb-4",children:t.title_romaji}),t.title_native&&(0,s.jsx)("h3",{className:"text-lg text-gray-500 dark:text-gray-500 mb-6",children:t.title_native}),t.description&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"Описание"}),(0,s.jsx)("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:t.description})]})]}),o.length>0&&(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[(0,s.jsxs)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6",children:["Эпизоды (",o.length,")"]}),(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map(e=>(0,s.jsx)("div",{className:"p-4 border rounded-lg cursor-pointer transition-colors ".concat((null==N?void 0:N.id)===e.id?"border-anime-purple bg-anime-purple bg-opacity-10":"border-gray-200 dark:border-gray-600 hover:border-anime-purple"),onClick:()=>f(e),children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"flex-shrink-0 w-10 h-10 bg-anime-purple text-white rounded-lg flex items-center justify-center font-semibold",children:e.episode_number}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white truncate",children:e.title||"Эпизод ".concat(e.episode_number)}),e.duration&&(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:[Math.floor(e.duration/60)," мин"]})]})]})},e.id))}),N&&(0,s.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,s.jsx)("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:N.title||"Эпизод ".concat(N.episode_number)}),N.description&&(0,s.jsx)("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:N.description}),(0,s.jsxs)("button",{className:"anime-button",children:[(0,s.jsx)(d.Z,{className:"h-5 w-5 mr-2"}),"Смотреть эпизод"]})]})]})]})]})})]})}},6454:function(e,a,t){"use strict";t.d(a,{DN:function(){return c},JF:function(){return l},c4:function(){return o},iJ:function(){return d}});var s=t(4829),r=t(2601);let n=r.env.NEXT_PUBLIC_API_URL||"http://localhost:8000",i=s.Z.create({baseURL:n,timeout:1e4,headers:{"Content-Type":"application/json"}});i.interceptors.request.use(e=>{let a=localStorage.getItem("token");return a&&(e.headers.Authorization="Bearer ".concat(a)),e}),i.interceptors.response.use(e=>e,e=>{var a;return(null===(a=e.response)||void 0===a?void 0:a.status)===401&&(localStorage.removeItem("token"),window.location.href="/auth/login"),Promise.reject(e)});let l={getList:async e=>{let a=await i.get("/api/v1/anime/",{params:e});return a.data},getDetail:async e=>{let a=await i.get("/api/v1/anime/".concat(e));return a.data},search:async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,t=await i.get("/api/v1/anime/search",{params:{q:e,limit:a}});return t.data},getGenres:async()=>{let e=await i.get("/api/v1/anime/genres/");return e.data},getStudios:async()=>{let e=await i.get("/api/v1/anime/studios/");return e.data}},c={getByAnime:async e=>{let a=await i.get("/api/v1/episodes/anime/".concat(e));return a.data},getDetail:async e=>{let a=await i.get("/api/v1/episodes/".concat(e));return a.data},getSources:async e=>{let a=await i.get("/api/v1/episodes/".concat(e,"/sources"));return a.data},saveProgress:async function(e,a){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];await i.post("/api/v1/episodes/".concat(e,"/progress"),{progress:a,completed:t})}},d={register:async e=>{let a=await i.post("/api/v1/auth/register",e);return a.data},login:async e=>{let a=new FormData;a.append("username",e.username),a.append("password",e.password);let t=await i.post("/api/v1/auth/login",a,{headers:{"Content-Type":"application/x-www-form-urlencoded"}});return t.data},refresh:async()=>{let e=await i.post("/api/v1/auth/refresh");return e.data}},o=async()=>{let e=await i.get("/health");return e.data}},4033:function(e,a,t){e.exports=t(94)}},function(e){e.O(0,[77,73,971,472,744],function(){return e(e.s=1962)}),_N_E=e.O()}]);