(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[229],{1330:function(e,a,s){Promise.resolve().then(s.bind(s,912))},8997:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});let t=(0,s(9763).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},9376:function(e,a,s){"use strict";var t=s(5475);s.o(t,"useParams")&&s.d(a,{useParams:function(){return t.useParams}}),s.o(t,"useRouter")&&s.d(a,{useRouter:function(){return t.useRouter}}),s.o(t,"useSearchParams")&&s.d(a,{useSearchParams:function(){return t.useSearchParams}})},912:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return g}});var t=s(7437),r=s(2265),i=s(9376),n=s(3145),l=s(6595),c=s(3276),d=s(9763);let o=(0,d.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);var m=s(1047),x=s(8997);let u=(0,d.Z)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);var h=s(1837);function g(){let e=parseInt((0,i.useParams)().id),[a,s]=(0,r.useState)(null),[d,g]=(0,r.useState)([]),[p,y]=(0,r.useState)(!0),[j,v]=(0,r.useState)(""),[f,b]=(0,r.useState)(null);(0,r.useEffect)(()=>{e&&N()},[e]);let N=async()=>{y(!0);try{let a=await h.JF.getDetail(e);s(a);let t=await h.DN.getByAnime(e);g(t.data),t.data.length>0&&b(t.data[0]),v("")}catch(e){console.error("Error loading anime data:",e),v("Не удалось загрузить информацию об аниме")}finally{y(!1)}};return p?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-anime-purple mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Загрузка..."})]})}):j||!a?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Ошибка"}),(0,t.jsx)("p",{className:"text-gray-600",children:j||"Аниме не найдено"})]})}):(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[a.banner_image&&(0,t.jsx)("div",{className:"h-64 md:h-96 bg-cover bg-center relative",style:{backgroundImage:"url(".concat(a.banner_image,")")},children:(0,t.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50"})}),(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,t.jsx)("div",{className:"lg:col-span-1",children:(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden",children:[(0,t.jsx)("div",{className:"aspect-[3/4] relative",children:a.cover_image?(0,t.jsx)(n.default,{src:a.cover_image,alt:a.title_romaji,fill:!0,className:"object-cover",sizes:"(max-width: 1024px) 100vw, 33vw"}):(0,t.jsx)("div",{className:"w-full h-full bg-gradient-to-br from-anime-purple to-anime-pink flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-white text-6xl font-bold",children:a.title_romaji.charAt(0)})})}),(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[a.status&&(0,t.jsx)("div",{children:(0,t.jsx)("span",{className:"px-3 py-1 text-sm font-medium rounded-full ".concat((e=>{switch(e){case"FINISHED":return"bg-green-100 text-green-800";case"RELEASING":return"bg-blue-100 text-blue-800";case"NOT_YET_RELEASED":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}})(a.status)),children:(e=>{switch(e){case"FINISHED":return"Завершено";case"RELEASING":return"Выходит";case"NOT_YET_RELEASED":return"Анонс";default:return"Неизвестно"}})(a.status)})}),a.average_score&&(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(l.Z,{className:"h-5 w-5 text-yellow-400 fill-current"}),(0,t.jsx)("span",{className:"text-lg font-semibold",children:(a.average_score/10).toFixed(1)}),(0,t.jsx)("span",{className:"text-gray-500",children:"/ 10"})]}),a.episodes&&(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(c.Z,{className:"h-5 w-5 text-gray-500"}),(0,t.jsxs)("span",{children:[a.episodes," эпизодов"]})]}),a.duration&&(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(o,{className:"h-5 w-5 text-gray-500"}),(0,t.jsxs)("span",{children:[a.duration," мин/эп"]})]}),a.season_year&&(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(m.Z,{className:"h-5 w-5 text-gray-500"}),(0,t.jsx)("span",{children:a.season_year}),a.season&&(0,t.jsxs)("span",{children:["• ",a.season]})]}),a.studios&&a.studios.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Студия"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:a.studios.map(e=>(0,t.jsx)("span",{className:"px-2 py-1 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded",children:e.name},e.id))})]}),a.genres&&a.genres.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Жанры"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:a.genres.map(e=>(0,t.jsx)("span",{className:"px-2 py-1 text-sm bg-anime-purple bg-opacity-10 text-anime-purple rounded",children:e.name},e.id))})]})]}),(0,t.jsxs)("div",{className:"mt-6 space-y-3",children:[(0,t.jsxs)("button",{className:"w-full anime-button flex items-center justify-center space-x-2",children:[(0,t.jsx)(x.Z,{className:"h-5 w-5"}),(0,t.jsx)("span",{children:"Добавить в избранное"})]}),(0,t.jsxs)("button",{className:"w-full border border-anime-purple text-anime-purple px-4 py-2 rounded-lg hover:bg-anime-purple hover:text-white transition-colors flex items-center justify-center space-x-2",children:[(0,t.jsx)(u,{className:"h-5 w-5"}),(0,t.jsx)("span",{children:"Поделиться"})]})]})]})]})}),(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-8",children:[(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:a.title_english||a.title_romaji}),a.title_romaji!==a.title_english&&(0,t.jsx)("h2",{className:"text-xl text-gray-600 dark:text-gray-400 mb-4",children:a.title_romaji}),a.title_native&&(0,t.jsx)("h3",{className:"text-lg text-gray-500 dark:text-gray-500 mb-6",children:a.title_native}),a.description&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"Описание"}),(0,t.jsx)("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:a.description})]})]}),d.length>0&&(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[(0,t.jsxs)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6",children:["Эпизоды (",d.length,")"]}),(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:d.map(e=>(0,t.jsx)("div",{className:"p-4 border rounded-lg cursor-pointer transition-colors ".concat((null==f?void 0:f.id)===e.id?"border-anime-purple bg-anime-purple bg-opacity-10":"border-gray-200 dark:border-gray-600 hover:border-anime-purple"),onClick:()=>b(e),children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"flex-shrink-0 w-10 h-10 bg-anime-purple text-white rounded-lg flex items-center justify-center font-semibold",children:e.episode_number}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white truncate",children:e.title||"Эпизод ".concat(e.episode_number)}),e.duration&&(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:[Math.floor(e.duration/60)," мин"]})]})]})},e.id))}),f&&(0,t.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,t.jsx)("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:f.title||"Эпизод ".concat(f.episode_number)}),f.description&&(0,t.jsx)("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:f.description}),(0,t.jsxs)("button",{className:"anime-button",children:[(0,t.jsx)(c.Z,{className:"h-5 w-5 mr-2"}),"Смотреть эпизод"]})]})]})]})]})})]})}},1837:function(e,a,s){"use strict";s.d(a,{DN:function(){return l},JF:function(){return n},c4:function(){return d},iJ:function(){return c}});var t=s(3464);let r=s(257).env.NEXT_PUBLIC_API_URL||"http://localhost:8000",i=t.Z.create({baseURL:r,timeout:1e4,headers:{"Content-Type":"application/json"}});i.interceptors.request.use(e=>{let a=localStorage.getItem("token");return a&&(e.headers.Authorization="Bearer ".concat(a)),e}),i.interceptors.response.use(e=>e,e=>{var a;return(null===(a=e.response)||void 0===a?void 0:a.status)===401&&(localStorage.removeItem("token"),window.location.href="/auth/login"),Promise.reject(e)});let n={getList:async e=>(await i.get("/api/v1/anime/",{params:e})).data,getDetail:async e=>(await i.get("/api/v1/anime/".concat(e))).data,search:async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return(await i.get("/api/v1/anime/search",{params:{q:e,limit:a}})).data},getGenres:async()=>(await i.get("/api/v1/anime/genres/")).data,getStudios:async()=>(await i.get("/api/v1/anime/studios/")).data},l={getByAnime:async e=>(await i.get("/api/v1/episodes/anime/".concat(e))).data,getDetail:async e=>(await i.get("/api/v1/episodes/".concat(e))).data,getSources:async e=>(await i.get("/api/v1/episodes/".concat(e,"/sources"))).data,saveProgress:async function(e,a){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];await i.post("/api/v1/episodes/".concat(e,"/progress"),{progress:a,completed:s})}},c={register:async e=>(await i.post("/api/v1/auth/register",e)).data,login:async e=>{let a=new FormData;return a.append("username",e.username),a.append("password",e.password),(await i.post("/api/v1/auth/login",a,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})).data},refresh:async()=>(await i.post("/api/v1/auth/refresh")).data},d=async()=>(await i.get("/health")).data}},function(e){e.O(0,[992,108,971,117,744],function(){return e(e.s=1330)}),_N_E=e.O()}]);